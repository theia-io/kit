<form class="flex flex-col" [formGroup]="kudoBoardFormGroup">
  <div>
    <div class="flex justify-center items-center">
      <ui-kit-pic-uploadable [autoUploadCb]="autoUploadBackground.bind(this)">
        @if((kudoBoardFormGroup.get('background')?.value?.length ?? 0) > 24 &&
        kudoBoardFormGroup.get('background')?.value; as background) {
        <ng-template uiKitPicUploadableTemplate>
          <img
            class="w-full object-cover max-h-[33vh]"
            width="64"
            height="64"
            [src]="background" />
        </ng-template>
        }
      </ui-kit-pic-uploadable>

      <ui-kit-color-picker
        class="block min-w-[64px] min-h-[64px]"
        (colorAccepted)="updateBackgroundColor($event)" />
    </div>

    <p-floatLabel class="block mt-8">
      <input
        class="w-full border-none shadow-none text-4xl focus:outline-none"
        id="title"
        type="text"
        pInputText
        formControlName="title" />
      <label class="w-full text-4xl" for="title">Kudo Board Title</label>
    </p-floatLabel>

    <section class="relative">
      <strong
        uiKitSmallTextTailwindClasses
        class="absolute right-6 bottom-6 text-xs">
        {{ kudoBoardFormGroup.get('title')?.value?.length }} /
        {{ titleMaxLength }}
      </strong>
    </section>
  </div>

  <p-floatLabel class="block mt-4">
    <input
      class="w-full border-none shadow-none text-4xl focus:outline-none"
      id="title"
      type="text"
      pInputText
      formControlName="recipient" />
    <label class="w-full text-4xl" for="title">Kudo Board Recipient</label>
  </p-floatLabel>

  <ng-template #statusTmpl>
    @let status = kudoBoardFormGroup.get('status')?.value;
    <p-button
      (onClick)="updateStatus(status)"
      [label]="
        status === kudoBoardStatus.Published ? 'Back to draft' : 'Publish'
      "
      [rounded]="true"
      [severity]="
        status === kudoBoardStatus.Published ? 'secondary' : 'success'
      " />
  </ng-template>
  <div class="text-center">
    <ng-container *ngTemplateOutlet="statusTmpl"></ng-container>
  </div>
</form>
