<div class="flex flex-col justify-center items-center gap-10">
  <span class="text-2xl">Farewell üóíÔ∏è ü´Ç</span>

  <form class="w-full" [formGroup]="farewellFormGroup">
    <p-floatLabel class="block">
      <input
        class="w-full"
        id="title"
        type="text"
        pInputText
        formControlName="titleControl" />
      <label for="title">Title</label>
    </p-floatLabel>
    <section class="mb-2">
      @if(!farewellFormGroup.get('titleControl')?.value?.length ||
      farewellFormGroup.get('titleControl')?.errors?.['minlength']) {
      <strong class="block text-xs text-gray-400">
        Must be at least 2 characters long. Currently you got
        {{ farewellFormGroup.get('titleControl')?.value?.length }}.
      </strong>
      } @if(farewellFormGroup.get('titleControl')?.errors?.['maxlength']) {
      <strong class="block text-xs text-gray-400">
        Must be less than 128 characters long. Currently you got
        {{ farewellFormGroup.get('titleControl')?.value?.length }}.
      </strong>
      }
    </section>

    <p-editor
      id="farewell-float"
      placeholder="Add farewell to your (ex-) colleagues üî•"
      [modules]="modules"
      [style]="{ height: '320px' }"
      class="w-full"
      (onTextChange)="onTextChangeHandler($event)"
      formControlName="editorControl">
      <p-header></p-header>
    </p-editor>

    @if(editorTextValue().length < 64) {
    <strong class="block text-xs text-gray-400">
      Must be at least 64 characters long. Current length is
      {{ editorTextValue().length }} characters.
    </strong>
    } @if(editorTextValue().length > 8192) {
    <strong class="block text-xs text-gray-400">
      Must be less than 8192 characters long. Current length is
      {{ editorTextValue().length }} characters.
    </strong>
    }
  </form>

  <ui-kit-pic-uploadable
    [imgConf]="{ src: '/farewell/farewell-page-logo-small.jpeg' }"
    [autoUploadCb]="onBasicUploadAuto"></ui-kit-pic-uploadable>

  <p-fileUpload
    [customUpload]="true"
    [multiple]="true"
    [auto]="true"
    chooseIcon="pi pi-upload"
    accept="image/*"
    [fileLimit]="10"
    maxFileSize="2500000"
    (uploadHandler)="onBasicUploadAuto($event)">
    <ng-template pTemplate="content">
      @if(filesToUpload().length) {
      <ul>
        @for (file of filesToUpload(); track $index) {
        <li>{{ file.name }} - {{ file.size }} bytes</li>
        }
      </ul>
      }
    </ng-template>
  </p-fileUpload>

  <p-button
    [disabled]="
      !(
        farewellFormGroup.valid &&
        editorTextValue().length >= 64 &&
        editorTextValue().length <= 8192
      )
    "
    (onClick)="saveFarewellHandler()"
    label="Save farewell"
    [raised]="true" />
</div>
