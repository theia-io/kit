@let tweets = tweets$ | async;

{{ tweetsLazyState().hasNextPage ? 'Loading...' : 'No more tweets' }}

{{
  tweetsLazyState().hasNextPage && tweets && tweets.length > 0
    ? 'Loading the feed items ...'
    : 'No'
}}

<!-- tweets view -->
@for (tweet of tweets; track $index) {
<!-- if not first -->
@if(!$first) {
<ui-kit-divider class="block my-2" />
}

<ui-kit-comp-card class="block p-2">
  <feat-tweet-tweety class="block w-full" [tweetId]="tweet.id" />
</ui-kit-comp-card>
} @empty {
<div class="mt-4 flex flex-col justify-center items-center">
  @if(isCurrentUserProfile()) {
  <p>You have not tweeted anything yet! Try post something</p>
  <ui-kit-tweet-button
    [iconAnimate]="true"
    text="Tweet"
    (click)="tweetButtonHandler()"
    class="w-full mt-4" />
  } @else {
  <p>{{ profile()?.name }} has not tweeted anything yet</p>
  }
</div>
}

<!-- lazyLoader -->
@if(tweetsLazyState().hasNextPage && tweets && tweets.length > 0) {
<div
  #loadMoreTmpl
  class="w-full flex flex-col justify-center items-center gap-2">
  <ui-kit-spinner />
  <p class="text-sm text-gray-400 font-semibold">Loading the feed items ...</p>
</div>

} @else if(!tweetsLazyState().hasNextPage && tweets && tweets.length > 0) {
<div class="w-full flex justify-center items-center">
  <p class="text-sm text-gray-400 font-semibold">That's the feed end.</p>
</div>
}

<p-button
  class="md:hidden fixed z-10 bottom-24 right-2"
  styleClass="rounded-full p-2"
  (onClick)="tweetButtonHandler()"
  aria-label="create farewell">
  <i
    class="pi pi-plus p-2 duration-300 hover:rotate-180"
    style="font-size: 1.5rem"></i>
</p-button>
